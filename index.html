<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes" />
  <title>Cyber Security Maturity Model – Check Point</title>
  <meta name="description" content="Secure your business today by assessing your cyber security maturity with our quick assessment." />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    :root {
      --primary: #0055a5;
      --red: #B70E4E;
      --light-blue: #AADAFF;
      --green: #2E7D32;
      --orange: #FF9800;
      --dark-red: #D32F2F;
      --critical-bg: #d32f2f;
      --critical-text: #ffffff;
      --high-bg: #ff9800;
      --high-text: #000000;
      --medium-bg: #ffc107;
      --medium-text: #000000;
      --low-bg: #4caf50;
      --low-text: #ffffff;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #000;
      color: #000;
      line-height: 1.5;
      overflow-x: hidden;
      position: relative;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    #white-bg, #question-bg {
      position: fixed;
      inset: 0;
      background: #ffffff;
      z-index: -5;
      opacity: 0;
      transition: opacity 0.6s ease;
      pointer-events: none;
    }
    #white-bg.active { opacity: 1; }
    #question-bg.active { opacity: 1; }
    .navbar-top {
      position: absolute;
      top: 0; left: 0; right: 0;
      z-index: 100;
      padding: 1rem 5%;
    }
    .nav-flex {
      display: flex;
      justify-content: center;
      align-items: center;
      max-width: 1400px;
      margin: 0 auto;
    }
    .nav-logo img { height: 36px; width: auto; }
    
    /* Auth Pages */
    #auth {
      position: relative;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 5rem 5% 3rem;
    }
    .auth-video {
      position: absolute;
      inset: 0;
      width: 100%; height: 100%;
      object-fit: cover;
      z-index: 1;
    }
    .auth-container {
      position: relative;
      z-index: 2;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 16px;
      padding: 2rem;
      max-width: 450px;
      width: 90%;
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
      text-align: center;
    }
    .auth-container h2 {
      color: var(--primary);
      margin-bottom: 1rem;
      font-size: 1.8rem;
    }
    .auth-container p {
      color: #666;
      margin-bottom: 2rem;
      font-size: 1rem;
    }
    .auth-input {
      width: 100%;
      padding: 1rem;
      margin-bottom: 1.5rem;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 1rem;
      transition: border-color 0.3s;
    }
    .auth-input:focus {
      outline: none;
      border-color: var(--primary);
    }
    .auth-button {
      background: var(--primary);
      color: white;
      font-weight: 600;
      font-size: 1.1rem;
      padding: 1rem 2rem;
      border-radius: 50px;
      cursor: pointer;
      border: none;
      width: 100%;
      transition: all 0.25s;
      margin-bottom: 1rem;
    }
    .auth-button:hover {
      background: #004080;
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.35);
    }
    .auth-button.secondary {
      background: #666;
    }
    .auth-button.secondary:hover {
      background: #555;
    }
    .auth-error {
      color: var(--dark-red);
      margin-top: 1rem;
      font-weight: 500;
      display: none;
    }
    .auth-success {
      color: var(--green);
      margin-top: 1rem;
      font-weight: 500;
      display: none;
    }
    .auth-switch {
      margin-top: 1rem;
      color: var(--primary);
      cursor: pointer;
      font-weight: 500;
    }
    .auth-switch:hover {
      text-decoration: underline;
    }
    
    /* Admin Dashboard */
    #admin-dashboard {
      position: relative;
      min-height: 100vh;
      display: none;
      padding: 5rem 5% 3rem;
      background: #f5f5f5;
    }
    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      gap: 1rem;
    }
    .admin-header h1 {
      color: var(--primary);
      font-size: 2rem;
    }
    .logout-btn {
      background: var(--dark-red);
      color: white;
      padding: 0.8rem 1.5rem;
      border-radius: 50px;
      cursor: pointer;
      border: none;
      font-weight: 600;
    }
    .logout-btn:hover {
      background: #b71c1c;
    }
    .admin-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }
    .stat-card {
      background: white;
      padding: 1.5rem;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .stat-card h3 {
      color: #666;
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
    }
    .stat-card .number {
      font-size: 2rem;
      font-weight: bold;
      color: var(--primary);
    }
    .admin-table-container {
      background: white;
      border-radius: 10px;
      padding: 1.5rem;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      overflow-x: auto;
    }
    .admin-table {
      width: 100%;
      border-collapse: collapse;
    }
    .admin-table th {
      text-align: left;
      padding: 1rem;
      background: var(--primary);
      color: white;
    }
    .admin-table td {
      padding: 1rem;
      border-bottom: 1px solid #eee;
    }
    .admin-table tr:hover {
      background: #f9f9f9;
    }
    .view-details {
      background: var(--primary);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      cursor: pointer;
      border: none;
      font-size: 0.9rem;
    }
    .view-details:hover {
      background: #004080;
    }
    .filter-section {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
    }
    .filter-input {
      padding: 0.5rem;
      border: 1px solid #ddd;
      border-radius: 5px;
      flex: 1;
      min-width: 200px;
    }
    .export-btn {
      background: var(--green);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      cursor: pointer;
      border: none;
    }
    
    /* Home Page */
    #home {
      position: relative;
      min-height: 100vh;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 5rem 5% 3rem;
    }
    .banner-video {
      position: absolute;
      inset: 0;
      width: 100%; height: 100%;
      object-fit: cover;
      z-index: 1;
    }
    .home-header {
      position: relative;
      z-index: 2;
      text-align: center;
      padding: 0 5%;
      max-width: 880px;
    }
    .home-header h2 {
      font-size: 2rem;
      color: white;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
      margin-bottom: 1rem;
    }
    .user-welcome {
      color: white;
      font-size: 1.2rem;
      margin-bottom: 1rem;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    }
    .button-wrapper {
      display: flex;
      justify-content: center;
      margin-top: 2rem;
      flex-wrap: wrap;
      gap: 1rem;
    }
    .button, .pdf-button, .email-button {
      background: var(--primary);
      color: white;
      font-weight: 600;
      font-size: 1.1rem;
      padding: 1.1rem 2.4rem;
      border-radius: 50px;
      box-shadow: 0 4px 14px rgba(0,0,0,0.3);
      cursor: pointer;
      border: none;
      min-width: 260px;
      transition: all 0.25s;
      touch-action: manipulation;
    }
    .email-button {
      background: #2E7D32;
    }
    .button:hover, .pdf-button:hover, .email-button:hover {
      background: #004080;
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.35);
    }
    .email-button:hover {
      background: #1B5E20;
    }
    #assessment { display: none; }
    .assessment-container {
      display: flex;
      min-height: 100vh;
      position: relative;
    }
    .main-content {
      flex: 1;
      padding: 90px 5% 60px;
      max-width: 1400px;
      margin: 0 auto;
    }
    .question-progress-container {
      margin: 0 auto 2rem;
      max-width: 900px;
    }
    .progress-border {
      height: 12px;
      background: #e0e0e0;
      border-radius: 6px;
      overflow: hidden;
    }
    #question-progress-bar {
      height: 100%;
      width: 0%;
      background: var(--primary);
      transition: width 0.6s ease-out;
    }
    .q-box {
      max-width: 1200px;
      margin: 0 auto 2rem;
      background: #ffffff;
      color: #000;
      border-radius: 16px;
      padding: 1.5rem;
      box-shadow: 0 10px 35px rgba(0,0,0,0.2);
      display: none;
      border: 1px solid #e8e8e8;
    }
    .q-box.active { display: block; }
    .q-header {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 1rem;
      line-height: 1.3;
    }
    .sub {
      font-size: 0.9rem;
      color: #555;
      margin-top: 0.3rem;
      margin-bottom: 1rem;
      font-weight: 500;
    }
    .answer-wrap {
      display: grid;
      grid-template-columns: 1fr;
      gap: 0.8rem;
      margin-bottom: 1.5rem;
    }
    @media (min-width: 900px) {
      .answer-wrap { grid-template-columns: repeat(2, 1fr); }
      .q-box { padding: 2.5rem; }
      .q-header { font-size: 1.8rem; }
    }
    .answer {
      padding: 0.8rem 1rem;
      border: 2px solid #d0d0d0;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.22s;
      background: #f9f9f9;
      display: flex;
      align-items: center;
      min-height: 60px;
      touch-action: manipulation;
    }
    .answer:hover { border-color: var(--primary); background: #f0f7ff; }
    .answer.selected { border-color: var(--primary); background: #e6f2ff; }
    .inner-wrap {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      width: 100%;
    }
    .text {
      font-size: 0.95rem;
      font-weight: 500;
      line-height: 1.4;
      flex: 1;
      min-width: 0;
    }
    input[type="radio"], input[type="checkbox"] { display: none; }
    .radio, .checkbox {
      width: 20px;
      height: 20px;
      border: 2px solid #888;
      border-radius: 50%;
      background: white;
      flex-shrink: 0;
      position: relative;
      margin-right: 0.5rem;
    }
    .checkbox {
      border-radius: 5px;
      margin-right: 0.5rem;
    }
    input:checked + .radio::after,
    input:checked + .checkbox::after {
      content: "";
      position: absolute;
      inset: 4px;
      background: var(--primary);
      border-radius: inherit;
    }
    .btn-box-wrap {
      display: flex;
      justify-content: space-between;
      margin-top: 1.5rem;
      gap: 1rem;
      flex-wrap: wrap;
    }
    .last-box {
      text-align: center;
      padding: 3rem 1.5rem;
      border-radius: 16px;
      box-shadow: 0 12px 40px rgba(0,0,0,0.25);
    }
    .last-box .title { font-size: 1.8rem; font-weight: 700; margin-bottom: 1rem; }
    .last-box .text { font-size: 1rem; margin: 1rem 0 1.5rem; color: #555; }
    .progress-border { height: 14px; background: #e0e0e0; border-radius: 7px; margin: 2rem auto; max-width: 440px; overflow: hidden; }
    #progress-bar { height: 100%; width: 0%; background: var(--primary); transition: width 2.8s ease-out; }
   
    /* Results Page Specific Styles - FULLY MOBILE FRIENDLY */
    .results-summary {
      text-align: center;
      margin-bottom: 2rem;
    }
    
    .results-logo {
      display: flex;
      justify-content: center;
      margin-bottom: 1.5rem;
    }
    
    .results-logo img {
      height: 40px;
      width: auto;
    }
   
    .overall-score {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 0.5rem;
    }
   
    .maturity-level {
      font-size: 1.3rem;
      color: #555;
      margin-bottom: 1.5rem;
    }
   
    .pillars-table {
      width: 100%;
      border-collapse: collapse;
      margin: 1.5rem 0;
      background: white;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      display: block;
      overflow-x: auto;
      white-space: nowrap;
      -webkit-overflow-scrolling: touch;
    }
   
    .pillars-table th {
      background: var(--primary);
      color: white;
      padding: 0.8rem 0.5rem;
      text-align: left;
      font-weight: 600;
      font-size: 0.8rem;
    }
   
    .pillars-table td {
      padding: 0.8rem 0.5rem;
      border-bottom: 1px solid #eee;
      font-size: 0.8rem;
    }
   
    .pillars-table tr:hover {
      background: #f9f9f9;
    }
   
    .pillars-table tr:last-child td {
      border-bottom: none;
    }
   
    .pillar-name {
      font-weight: 600;
      color: #333;
      min-width: 150px;
    }
   
    .score-cell {
      text-align: center;
      font-weight: 600;
      min-width: 50px;
    }
   
    .score-bar-container {
      width: 100px;
      height: 16px;
      background: #f0f0f0;
      border-radius: 8px;
      overflow: hidden;
      margin-top: 0.2rem;
    }
   
    .score-bar {
      height: 100%;
      background: var(--primary);
      border-radius: 8px;
      transition: width 1s ease-out;
    }
   
    .recommendations-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1rem;
      margin-top: 1.5rem;
    }
   
    @media (min-width: 768px) {
      .recommendations-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      .overall-score { font-size: 3rem; }
      .maturity-level { font-size: 1.5rem; }
      .pillars-table th { padding: 1.2rem 0.8rem; font-size: 0.9rem; }
      .pillars-table td { padding: 1rem 0.8rem; font-size: 0.9rem; }
      .score-bar-container { width: 100%; }
    }
   
    .recommendation-card {
      background: white;
      border-radius: 10px;
      padding: 1.2rem;
      border-left: 4px solid var(--primary);
      box-shadow: 0 4px 8px rgba(0,0,0,0.08);
    }
   
    .recommendation-card h4 {
      color: var(--primary);
      margin-bottom: 0.8rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 0.5rem;
      font-size: 1.1rem;
    }
   
    .priority-badge {
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      font-size: 0.7rem;
      font-weight: 600;
      white-space: nowrap;
    }
   
    .priority-critical {
      background: var(--critical-bg);
      color: var(--critical-text);
    }
   
    .priority-high {
      background: var(--high-bg);
      color: var(--high-text);
    }
   
    .priority-medium {
      background: var(--medium-bg);
      color: var(--medium-text);
    }
   
    .priority-low {
      background: var(--low-bg);
      color: var(--low-text);
    }
   
    .recommendation-card p {
      margin-bottom: 0.8rem;
      font-size: 0.9rem;
    }
   
    .recommendation-list {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
   
    .recommendation-item {
      padding: 0.5rem 0.8rem;
      border-radius: 4px;
      font-weight: 500;
      font-size: 0.9rem;
    }
   
    .recommendation-critical {
      background: var(--critical-bg);
      color: var(--critical-text);
    }
   
    .recommendation-high {
      background: var(--high-bg);
      color: var(--high-text);
    }
   
    .recommendation-medium {
      background: var(--medium-bg);
      color: var(--medium-text);
    }
   
    .recommendation-low {
      background: var(--low-bg);
      color: var(--low-text);
    }
   
    .download-section {
      text-align: center;
      margin-top: 2rem;
      padding-top: 1.5rem;
      border-top: 2px solid #eee;
    }
   
    .no-recommendations {
      text-align: center;
      padding: 2rem 1rem;
      background: #f8f9fa;
      border-radius: 10px;
      margin-top: 1.5rem;
    }
   
    .no-recommendations h3 {
      color: var(--green);
      margin-bottom: 1rem;
      font-size: 1.2rem;
    }
   
    .no-recommendations p {
      font-size: 0.9rem;
    }
   
    .email-form {
      background: #f8f9fa;
      padding: 1.5rem;
      border-radius: 10px;
      margin-top: 1.5rem;
    }
   
    .email-form h3 {
      margin-bottom: 1rem;
      color: var(--primary);
      font-size: 1.2rem;
    }
   
    .email-form p {
      font-size: 0.9rem;
      margin-bottom: 1rem;
    }
   
    .email-form input {
      width: 100%;
      padding: 0.8rem;
      margin: 0.5rem 0 1rem;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 1rem;
    }
   
    .email-success {
      background: #d4edda;
      color: #155724;
      padding: 0.8rem;
      border-radius: 5px;
      margin-top: 1rem;
      display: none;
      text-align: center;
      font-size: 0.9rem;
    }
   
    .email-error {
      background: #f8d7da;
      color: #721c24;
      padding: 0.8rem;
      border-radius: 5px;
      margin-top: 1rem;
      display: none;
      text-align: center;
      font-size: 0.9rem;
    }
   
    .email-buttons {
      display: flex;
      gap: 0.8rem;
      justify-content: center;
      flex-wrap: wrap;
    }
   
    .email-buttons .button,
    .email-buttons .pdf-button,
    .email-buttons .email-button {
      min-width: auto;
      width: 100%;
      max-width: 300px;
      padding: 0.8rem 1.5rem;
      font-size: 1rem;
    }
   
    /* Loading spinner */
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
      margin-right: 10px;
    }
   
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
   
    /* Auto-email notification */
    .auto-email-notice {
      background: #e3f2fd;
      color: #1565c0;
      padding: 0.8rem;
      border-radius: 5px;
      margin-top: 1rem;
      text-align: center;
      display: none;
      font-size: 0.9rem;
    }

    /* PDF Report Styles - Hidden from view */
    .pdf-page {
      width: 210mm;
      min-height: 297mm;
      padding: 20mm;
      background: white;
      font-family: Arial, sans-serif;
      box-sizing: border-box;
      position: absolute;
      left: -9999px;
      top: 0;
    }
    
    .pdf-header {
      text-align: center;
      margin-bottom: 30px;
      border-bottom: 2px solid #0055a5;
      padding-bottom: 20px;
    }
    
    .pdf-logo {
      height: 50px;
      width: auto;
      margin-bottom: 15px;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
    
    .pdf-header h1 {
      color: #0055a5;
      font-size: 24px;
      margin: 0;
      text-align: center;
    }
    
    .pdf-date {
      color: #666;
      font-size: 14px;
      text-align: center;
      margin-top: 5px;
      margin-bottom: 20px;
    }
    
    .pdf-section {
      margin-bottom: 30px;
    }
    
    .pdf-section h2 {
      color: #0055a5;
      font-size: 22px;
      border-bottom: 2px solid #0055a5;
      padding-bottom: 10px;
      margin-bottom: 20px;
    }
    
    .pdf-score-summary {
      text-align: center;
      margin-bottom: 30px;
      padding: 20px;
      background: #f5f5f5;
      border-radius: 10px;
    }
    
    .pdf-overall-score {
      font-size: 48px;
      font-weight: bold;
      color: #0055a5;
    }
    
    .pdf-maturity-level {
      font-size: 24px;
      color: #666;
    }
    
    .pdf-table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }
    
    .pdf-table th {
      background: #0055a5;
      color: white;
      padding: 12px;
      text-align: left;
    }
    
    .pdf-table td {
      padding: 10px;
      border-bottom: 1px solid #ddd;
    }
    
    .pdf-progress-bar {
      width: 100%;
      height: 20px;
      background: #f0f0f0;
      border-radius: 10px;
      overflow: hidden;
    }
    
    .pdf-progress-fill {
      height: 100%;
      background: #0055a5;
    }
    
    .pdf-recommendation {
      margin-bottom: 20px;
      page-break-inside: avoid;
    }
    
    .pdf-recommendation h3 {
      color: #0055a5;
      margin-bottom: 10px;
    }
    
    .pdf-recommendation-item {
      padding: 10px;
      margin-bottom: 5px;
      border-radius: 5px;
      color: white;
    }
    
    .pdf-footer {
      text-align: center;
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid #ddd;
      color: #666;
      font-size: 12px;
    }
    
    /* Admin modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: white;
      padding: 2rem;
      border-radius: 10px;
      max-width: 600px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }
    .modal-close {
      float: right;
      font-size: 1.5rem;
      cursor: pointer;
      color: #666;
    }
    .modal-close:hover {
      color: #000;
    }
    .modal h2 {
      color: var(--primary);
      margin-bottom: 1rem;
    }
    .modal-detail {
      margin-bottom: 1rem;
      padding: 0.5rem;
      border-bottom: 1px solid #eee;
    }
    .modal-detail strong {
      display: inline-block;
      width: 150px;
      color: #666;
    }
  </style>
</head>
<body>
  <div id="white-bg"></div>
  <div id="question-bg"></div>
  <nav class="navbar-top">
    <div class="nav-flex">
      <div class="nav-logo">
        <img src="https://assessment.checkpoint.com/wp-content/uploads/2024/08/logo.svg" alt="Check Point Logo">
      </div>
    </div>
  </nav>
  
  <!-- Auth Page (Login/Signup) -->
  <section id="auth">
    <video class="auth-video" autoplay loop muted playsinline poster="https://assessment.checkpoint.com/wp-content/uploads/2024/08/desktop_hero_6.png">
      <source src="https://player.vimeo.com/progressive_redirect/playback/995793097/rendition/1080p/file.mp4?loc=external&log_user=0&signature=f093b203100aa9332ece8b00759cb15fc73bef76d9ac5ef652aab2cee641c7af" type="video/mp4">
    </video>
    <div class="auth-container">
      <div id="login-section">
        <h2>Login</h2>
        <p>Enter your credentials to access the Cyber Security Maturity Model</p>
        <input type="email" id="login-email" class="auth-input" placeholder="Email" required>
        <input type="password" id="login-password" class="auth-input" placeholder="Password" required>
        <button class="auth-button" onclick="login()">Login</button>
        <button class="auth-button secondary" onclick="showSignup()">Create New Account</button>
        <div id="login-error" class="auth-error"></div>
      </div>
      
      <div id="signup-section" style="display: none;">
        <h2>Create Account</h2>
        <p>Register to access the Cyber Security Maturity Model</p>
        <input type="email" id="signup-email" class="auth-input" placeholder="Email" required>
        <input type="password" id="signup-password" class="auth-input" placeholder="Password" required>
        <input type="password" id="signup-confirm" class="auth-input" placeholder="Confirm Password" required>
        <button class="auth-button" onclick="signup()">Sign Up</button>
        <button class="auth-button secondary" onclick="showLogin()">Back to Login</button>
        <div id="signup-error" class="auth-error"></div>
        <div id="signup-success" class="auth-success"></div>
      </div>
    </div>
  </section>

  <!-- Admin Dashboard -->
  <section id="admin-dashboard">
    <div class="admin-header">
      <h1>Admin Dashboard - Assessment Results</h1>
      <button class="logout-btn" onclick="logout()">Logout</button>
    </div>
    
    <div class="filter-section">
      <input type="text" id="search-filter" class="filter-input" placeholder="Search by email..." onkeyup="filterResults()">
      <input type="date" id="date-filter" class="filter-input" onchange="filterResults()">
      <button class="export-btn" onclick="exportToCSV()">Export to CSV</button>
    </div>
    
    <div class="admin-stats" id="admin-stats">
      <!-- Stats will be populated by JavaScript -->
    </div>
    
    <div class="admin-table-container">
      <table class="admin-table" id="results-table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Email</th>
            <th>Overall Score</th>
            <th>Maturity Level</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="results-body">
          <!-- Results will be populated by JavaScript -->
        </tbody>
      </table>
    </div>
  </section>

  <!-- Home Page (Initially Hidden) -->
  <section id="home">
    <video class="banner-video" autoplay loop muted playsinline poster="https://assessment.checkpoint.com/wp-content/uploads/2024/08/desktop_hero_6.png">
      <source src="https://player.vimeo.com/progressive_redirect/playback/995793097/rendition/1080p/file.mp4?loc=external&log_user=0&signature=f093b203100aa9332ece8b00759cb15fc73bef76d9ac5ef652aab2cee641c7af" type="video/mp4">
    </video>
    <div class="home-header">
      <div class="user-welcome" id="welcome-message"></div>
      <h2>SECURE YOUR BUSINESS TODAY</h2>
      <div class="button-wrapper">
        <button class="button" onclick="startAssessment()">Cyber Security Maturity Model</button>
        <button class="button" id="admin-btn" onclick="showAdminDashboard()" style="display: none;">Admin Dashboard</button>
      </div>
    </div>
  </section>
  
  <div id="assessment" class="assessment-container">
    <div class="main-content">
      <div class="question-progress-container">
        <div class="progress-border">
          <div id="question-progress-bar"></div>
        </div>
      </div>
      
      <!-- QUESTION 1 -->
      <div id="q1" class="q-box active" data-num="1">
        <div class="q-header">To what extent are advanced network protections deployed across all sites?</div>
        <div class="sub">Choose all that apply</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="checkbox" name="q1" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Next-Generation Firewall (NGFW)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q1" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Intrusion Detection/Prevention Systems (IDS/IPS)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q1" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Network Segmentation and Microsegmentation</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q1" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Network Access Control (NAC)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q1" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">DNS and Content Filtering</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q1" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">User Entity Behavioural Analysis</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q1" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Deception Technologies (e.g., honeypots)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q1" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">SASE Secure Remote Access</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q1" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">VPN Secure Remote Access</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q1" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Network Traffic Analysis (NTA)</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button next" onclick="nextQuestion(1)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 2 -->
      <div id="q2" class="q-box" data-num="2">
        <div class="q-header">How do you scale security performance and capacity in your on-premises data center environment when demand increases (e.g., during peak traffic, growth, or seasonal bursts such as e-commerce events)?</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="radio" name="q2">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">We use a fully scalable, elastic security solution that dynamically adds capacity (e.g., cloud-like auto-scaling firewalls or security fabric)</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q2">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">We use clustering or load balancing across multiple fixed security appliances from a single vendor</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q2">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">We manually purchase and deploy additional firewalls/appliances when capacity is reached</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q2">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">We do not have a scalable approach — capacity is fixed and often becomes a bottleneck</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(2)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(2)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 3 -->
      <div id="q3" class="q-box" data-num="3">
        <div class="q-header">Does your firewall clustering provide full and active resiliency?</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="radio" name="q3">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Active-active firewalls are deployed from a single vendor</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q3">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Active-passive firewalls are deployed in highly available clusters</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q3">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Firewalls with load balancers from another vendor are deployed</div>
            </div>
          </label>
          <label class="answer exclusive-option">
            <input type="radio" name="q3" class="exclusive">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Not sure</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(3)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(3)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 4 -->
      <div id="q4" class="q-box" data-num="4">
        <div class="q-header">How do you scale security performance and capacity in your on-premises data center environment when demand increases (e.g., during peak traffic, growth, or seasonal bursts such as e-commerce events)?</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="radio" name="q4">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">We use a fully scalable, elastic security solution that dynamically adds capacity (e.g., cloud-like auto-scaling firewalls or security fabric)</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q4">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">We use clustering or load balancing across multiple fixed security appliances from a single vendor</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q4">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">We manually purchase and deploy additional firewalls/appliances when capacity is reached</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q4">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">We do not have a scalable approach — capacity is fixed and often becomes a bottleneck</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(4)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(4)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 5 -->
      <div id="q5" class="q-box" data-num="5">
        <div class="q-header">Does your firewall clustering provide full and active resiliency?</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="radio" name="q5">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Active-active firewalls are deployed from a single vendor</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q5">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Active-passive firewalls are deployed in highly available clusters</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q5">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Firewalls with load balancers from another vendor are deployed</div>
            </div>
          </label>
          <label class="answer exclusive-option">
            <input type="radio" name="q5" class="exclusive">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Not sure</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(5)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(5)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 6 -->
      <div id="q6" class="q-box" data-num="6">
        <div class="q-header">What do you currently use to automatically prevent sophisticated attacks that move laterally across macro and micro segments?</div>
        <div class="sub">Choose all that apply</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="checkbox" name="q6" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Software-defined Networking</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q6" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Agile and automated policy</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q6" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Business logic policy</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q6" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Service chaining using NSX/Cisco/ACI/OpenStack</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q6" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Dedicated policy layers</div>
            </div>
          </label>
          <label class="answer exclusive-option">
            <input type="checkbox" name="q6" class="exclusive">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Not sure</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(6)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(6)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 7 -->
      <div id="q7" class="q-box" data-num="7">
        <div class="q-header">Which of these Artificial Intelligence and Machine Learning technologies are you using to hunt down threats and preemptively look for the first stages of an attack?</div>
        <div class="sub">Choose all that apply</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="checkbox" name="q7" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Sandboxing</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q7" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Next Generation Web Application Firewall</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q7" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Cloud-native vulnerability scanning</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q7" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Real-time threat intelligence to prevent zero-day attacks</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q7" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Kubernetes runtime security</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q7" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Anti-malware</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q7" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">File sanitization (CDR)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q7" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Malware DNA</div>
            </div>
          </label>
          <label class="answer exclusive-option">
            <input type="checkbox" name="q7" class="exclusive">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Not sure</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(7)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(7)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 8 -->
      <div id="q8" class="q-box" data-num="8">
        <div class="q-header">How do you secure workloads such as Kubernetes, containers, serverless?</div>
        <div class="sub">Choose all that apply</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="checkbox" name="q8" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Posture management</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q8" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Threat prevention</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q8" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Vulnerability scanning</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q8" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Least privileged access</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q8" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Not using cloud for workloads</div>
            </div>
          </label>
          <label class="answer exclusive-option">
            <input type="checkbox" name="q8" class="exclusive">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Not sure</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(8)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(8)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 9 -->
      <div id="q9" class="q-box" data-num="9">
        <div class="q-header">Do you have unified security and threat management for your on-premises and cloud environments?</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="radio" name="q9">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Fully unified</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q9">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Managed through separate tools</div>
            </div>
          </label>
          <label class="answer exclusive-option">
            <input type="radio" name="q9" class="exclusive">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Not sure</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(9)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(9)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 10 -->
      <div id="q10" class="q-box" data-num="10">
        <div class="q-header">What percentage of your organization's employees work from home at least 2 days a week?</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="radio" name="q10">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Up to 10%</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q10">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">11%–50%</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q10">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">51%–80%</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q10">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Over 80%</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(10)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(10)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 11 -->
      <div id="q11" class="q-box" data-num="11">
        <div class="q-header">Your organization's security policy allows remote access to corporate applications</div>
        <div class="sub">Choose all that apply</div>
        <div class="answer-wrap">
          <label class="answer exclusive-option">
            <input type="checkbox" name="q11" class="exclusive">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">We do not allow any remote access</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q11" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Employees with company managed laptops and/or mobile devices only</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q11" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">From personal mobile devices</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q11" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">From personal laptops</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q11" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">By third parties (contractors, consultants or partners)</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(11)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(11)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 12 -->
      <div id="q12" class="q-box" data-num="12">
        <div class="q-header">Connecting remote users to corporate applications in your company requires</div>
        <div class="sub">Choose all that apply</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="checkbox" name="q12" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">SASE connection (cloud-based service)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q12" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Device risk posture check</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q12" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Multi-factor authentication</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q12" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">VPN connection</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(12)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(12)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 13 -->
      <div id="q13" class="q-box" data-num="13">
        <div class="q-header">How do you protect remote users while they are browsing the internet?</div>
        <div class="sub">Choose all that apply</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="checkbox" name="q13" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Sanitize potentially malicious downloads</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q13" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Real-time scanning of online forms for phishing prevention</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q13" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Stop entering corporate credentials to non-business websites</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q13" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Restrict access to certain websites (e.g. block access to adult and gambling sites)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q13" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Scan for data leakage</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q13" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Prevent access to URLs known as malicious</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(13)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(13)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 14 -->
      <div id="q14" class="q-box" data-num="14">
        <div class="q-header">How do you prevent sensitive business data from leaking outside the corporate?</div>
        <div class="sub">Choose all that apply</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="checkbox" name="q14" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Disk encryption on endpoint devices</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q14" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Scan files for sensitive content before uploaded to external websites/messaging apps</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q14" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Scan content that's uploaded in the browser</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q14" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Scan email and office applications for sensitive content before it is shared externally</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q14" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Permit safe use of Generative AI tools</div>
            </div>
          </label>
          <label class="answer exclusive-option">
            <input type="checkbox" name="q14" class="exclusive">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">I don't know</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(14)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(14)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 15 -->
      <div id="q15" class="q-box" data-num="15">
        <div class="q-header">Pick the applications your company's employees use for corporate email and cloud applications</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="radio" name="q15">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Office 365 + Google apps + Teams/SharePoint/OneDrive</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q15">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Gmail + Google Workspace</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q15">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Mixed modern SaaS (Office 365/Google + Zoom/Slack/Dropbox)</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q15">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">On-premises email (Microsoft Exchange) only</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q15">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Other apps only (Zoom/Slack/Dropbox etc.)</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(15)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(15)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 16 -->
      <div id="q16" class="q-box" data-num="16">
        <div class="q-header">In the case of a ransomware attack, my organization's endpoint protection can:</div>
        <div class="sub">Choose all that apply</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="checkbox" name="q16" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Recover ransomware-encrypted files</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q16" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Automatically detect and stop the attack</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q16" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Quarantine the infected endpoint</div>
            </div>
          </label>
          <label class="answer exclusive-option">
            <input type="checkbox" name="q16" class="exclusive">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">None of the above</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(16)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(16)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 17 -->
      <div id="q17" class="q-box" data-num="17">
        <div class="q-header">Which of the following security solutions are being used in your company?</div>
        <div class="sub">Choose all that apply</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="checkbox" name="q17" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Endpoint Detection and Response / Extended Detection and Response / Managed Detection and Response (EDR/XDR/MDR)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q17" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Next-Generation Antivirus / Endpoint Protection Platform (NGAV/EPP)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q17" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Cloud-based security services (SASE)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q17" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Email security</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q17" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Secure web gateway</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q17" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Mobile threat defence</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q17" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Endpoint and mobile vulnerability management</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q17" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Cloud-based application posture check</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q17" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Collaboration apps security</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(17)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(17)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 18 -->
      <div id="q18" class="q-box" data-num="18">
        <div class="q-header">How many security vendors do you use to secure remote internet access, corporate access, email, identities, assets and data?</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="radio" name="q18">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">1–3 vendors</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q18">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">4–6 vendors</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q18">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">7–9 vendors</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q18">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">10+ vendors</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(18)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(18)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 19 -->
      <div id="q19" class="q-box" data-num="19">
        <div class="q-header">What endpoint protections are in use?</div>
        <div class="sub">Choose all that apply</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="checkbox" name="q19" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Endpoint Detection and Response (EDR)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q19" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Antivirus / Anti-malware</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q19" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Full Disk Encryption + Removable Device Encryption</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q19" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Application Control</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q19" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Posture Management (vulnerability) with Patch Management</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q19" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">USB / Peripheral Control</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q19" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Browser Security with Content Filtering and Data Loss Prevention</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q19" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Mobile Device Management (MDM) + Mobile Device Security</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q19" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Local Firewall and Host-based Intrusion Detection System</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q19" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Device Policy Configuration and Control</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(19)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(19)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 20 -->
      <div id="q20" class="q-box" data-num="20">
        <div class="q-header">To what extent are advanced cloud protections deployed?</div>
        <div class="sub">Choose all that apply</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="checkbox" name="q20" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Cloud Security Posture Management (CSPM)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q20" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Cloud Workload Protection Platform (CWPP)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q20" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Cloud Infrastructure Entitlement Management (CIEM)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q20" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Encryption of Data at Rest and in Transit</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q20" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Network Segmentation</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q20" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Cloud Firewall</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q20" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Cloud Web Application Firewall</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q20" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Container Security + Serverless (e.g., image scanning, runtime protection)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q20" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Cloud-Native Application Protection Platform (CNAPP)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q20" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Cloud Access Security Broker (CASB)</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(20)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(20)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 21 -->
      <div id="q21" class="q-box" data-num="21">
        <div class="q-header">To what extent are your applications protected?</div>
        <div class="sub">Choose all that apply</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="checkbox" name="q21" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Web Application Firewall (WAF)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q21" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Static and Dynamic Application Security Testing (SAST/DAST)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q21" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Software Composition Analysis (SCA)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q21" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Secure Software Development Life Cycle Practices</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q21" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">API Security</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q21" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Large Language Model Security</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q21" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Code Signing and Integrity Checks</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q21" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">DevSecOps Integration</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q21" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Penetration Testing</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q21" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">OWASP Top 10 Mitigation</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(21)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(21)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 22 -->
      <div id="q22" class="q-box" data-num="22">
        <div class="q-header">Do you have advanced email and collaboration protection?</div>
        <div class="sub">Choose all that apply</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="checkbox" name="q22" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Email Security in place</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q22" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Phishing Protection and Simulation</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q22" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Attachment Sandboxing + Encrypted Attachments</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q22" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">URL Rewriting and Click Protection</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q22" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">DMARC, DKIM, SPF Enforcement</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q22" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Data Leakage Prevention (DLP) for Email and Collaboration</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q22" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Email Encryption</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q22" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Collaboration Tool Monitoring (e.g., Teams, Slack)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q22" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Impersonation and Spoofing Detection</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q22" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">User Awareness Training</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(22)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(22)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 23 -->
      <div id="q23" class="q-box" data-num="23">
        <div class="q-header">To what extent is the company's critical data secured?</div>
        <div class="sub">Choose all that apply</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="checkbox" name="q23" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Data Classification and Labeling</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q23" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Data Loss Prevention (DLP)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q23" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Encryption (at rest, in transit, and in use)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q23" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Tokenization and Masking</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q23" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Data Access Governance</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q23" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Data Discovery and Mapping</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q23" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Data Residency and Sovereignty Controls</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q23" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Secure Data Disposal</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q23" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Privacy Impact Assessments (PIAs)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q23" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">User Activity Monitoring on Sensitive Data</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(23)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(23)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 24 -->
      <div id="q24" class="q-box" data-num="24">
        <div class="q-header">To what extent do you have visibility and remediation steps on external risk?</div>
        <div class="sub">Choose all that apply</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="checkbox" name="q24" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Vendor Risk Assessments</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q24" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Continuous Attack Surface Monitoring</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q24" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Vulnerability Management + Exposure Validation</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q24" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Risk Management</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q24" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Dark Web Scanning for Sensitive Information</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q24" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Threat Intelligence</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q24" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Digital Brand and Risk Protection + Phishing / Social Media</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q24" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Third-Party Access Controls</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q24" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Continuous Monitoring of Vendors</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q24" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Onboarding/Offboarding Procedures</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(24)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(24)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 25 -->
      <div id="q25" class="q-box" data-num="25">
        <div class="q-header">How do you ensure identities are trusted and ensure only access to what is needed to fulfill your role in the company?</div>
        <div class="sub">Choose all that apply</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="checkbox" name="q25" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Multi-Factor Authentication (MFA)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q25" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Single Sign-On (SSO)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q25" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Privileged Access Management (PAM)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q25" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Role-Based Access Control (RBAC)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q25" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Just-In-Time (JIT) Access</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q25" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Identity Federation and Federation Protocols (SAML, OIDC)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q25" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">User Lifecycle Management</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q25" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Access Reviews and Recertification</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q25" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Password Policy Enforcement</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q25" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Behavioral Biometrics / Risk-Based Authentication</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(25)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(25)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 26 -->
      <div id="q26" class="q-box" data-num="26">
        <div class="q-header">To what extent does your company monitor security events and use threat intelligence?</div>
        <div class="sub">Choose all that apply</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="checkbox" name="q26" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Security Information and Event Management (SIEM)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q26" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Security Orchestration, Automation and Response (SOAR)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q26" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Threat Intelligence Integration</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q26" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">User and Entity Behavior Analytics (UEBA)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q26" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Log Aggregation and Retention</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q26" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Anomaly Detection</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q26" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Deception Technologies</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q26" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Threat Hunting Capabilities</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q26" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Real-time Alerting and Correlation</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q26" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">MITRE ATT&CK Mapping</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(26)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(26)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 27 -->
      <div id="q27" class="q-box" data-num="27">
        <div class="q-header">To what extent do you have incident response and recovery?</div>
        <div class="sub">Choose all that apply</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="checkbox" name="q27" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Incident Response Plan (IRP)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q27" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Tabletop Exercises and Simulations</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q27" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Forensics and Evidence Collection Tools</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q27" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Crisis Communication Plan</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q27" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Automated Virtual Patching</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q27" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Business Continuity Plan (BCP)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q27" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Disaster Recovery Plan (DRP)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q27" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Playbooks for Common Scenarios</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q27" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Post-Incident Review Process</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q27" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Ransomware Response Protocols</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(27)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(27)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 28 -->
      <div id="q28" class="q-box" data-num="28">
        <div class="q-header">Operational security projects?</div>
        <div class="sub">Choose all that apply</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="checkbox" name="q28" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Business Impact Analyses</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q28" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Risk Assessments</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q28" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Vulnerability Assessments</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q28" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Penetration Testing</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q28" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Continuous Threat and Exposure Management</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q28" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Unified Management</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q28" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">AI Assisted Security Tools + Management + Detect + Respond</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q28" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Open Garden Platform</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q28" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Security Operations Center (SOC)</div>
            </div>
          </label>
          <label class="answer">
            <input type="checkbox" name="q28" class="normal-option">
            <div class="checkbox"></div>
            <div class="inner-wrap">
              <div class="text">Shared Indicators of Compromise</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(28)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(28)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 29 - AI Security -->
      <div id="q29" class="q-box" data-num="29">
        <div class="q-header">How effectively does your organization implement runtime monitoring and protection mechanisms for AI systems, such as anomaly detection, input validation, and real-time threat response?</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="radio" name="q29">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">No AI models to protect</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q29">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">No runtime protections; reliant on basic firewalls or none at all.</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q29">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Basic monitoring tools in use, but reactive and manual.</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q29">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Standardized tools for anomaly detection deployed across key AI workloads.</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q29">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Automated threat response with metrics tracking effectiveness.</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q29">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">AI-specific runtime defenses integrated with predictive analytics and zero-trust architecture.</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(29)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(29)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 30 - AI Security -->
      <div id="q30" class="q-box" data-num="30">
        <div class="q-header">To what extent has your organization developed and enforced governance frameworks for GenAI applications, including model approval processes, ethical guidelines, and audit trails?</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="radio" name="q30">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">No formal governance; ad-hoc development and deployment.</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q30">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Basic policies exist but are not consistently applied.</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q30">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Defined governance standards with regular reviews for all GenAI apps.</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q30">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Governance integrated with risk assessments and compliance reporting.</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q30">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Advanced governance with AI ethics boards, automated audits, and continuous policy evolution.</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(30)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(30)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 31 - AI Security -->
      <div id="q31" class="q-box" data-num="31">
        <div class="q-header">How comprehensively does your organization apply DLP controls to AI-related data, such as classification, encryption, and monitoring for exfiltration risks?</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="radio" name="q31">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Minimal DLP; data handled without specific AI considerations.</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q31">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Basic access controls and encryption for sensitive data.</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q31">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">AI-specific DLP policies with tools for data tagging and leakage detection.</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q31">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Real-time monitoring and automated blocking of DLP violations.</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q31">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Integrated DLP with AI-driven threat intelligence and zero-data-exposure architectures.</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(31)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(31)">NEXT →</button>
        </div>
      </div>
      
      <!-- QUESTION 32 - AI Security -->
      <div id="q32" class="q-box" data-num="32">
        <div class="q-header">What is the maturity of your organization's security measures for AI data centers, covering access controls, vulnerability management, and resilience against physical/cyber threats?</div>
        <div class="answer-wrap">
          <label class="answer">
            <input type="radio" name="q32">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Basic physical security; no AI-specific data center protections.</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q32">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Standard network segmentation and patching routines.</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q32">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Dedicated AI zones with multi-factor authentication and regular audits.</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q32">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Advanced monitoring with AI-assisted vulnerability scanning and incident response.</div>
            </div>
          </label>
          <label class="answer">
            <input type="radio" name="q32">
            <div class="radio"></div>
            <div class="inner-wrap">
              <div class="text">Fully resilient setup with supply chain verification, quantum-resistant encryption, and automated failover.</div>
            </div>
          </label>
        </div>
        <div class="btn-box-wrap">
          <button class="button prev" onclick="prevQuestion(32)">← PREVIOUS</button>
          <button class="button next" onclick="nextQuestion(32)">SUBMIT →</button>
        </div>
      </div>
      
      <!-- Calculating page -->
      <div id="final" class="q-box last-box" style="display:none;">
        <div class="title">Calculating your score</div>
        <div class="text">PROGRESS</div>
        <div class="progress-border">
          <div id="progress-bar"></div>
        </div>
      </div>
      
      <!-- Results page -->
      <div id="results" class="q-box" style="display:none;">
        <div class="results-logo">
          <img src="https://assessment.checkpoint.com/wp-content/uploads/2024/08/logo.svg" alt="Check Point Logo">
        </div>
        <div class="results-summary">
          <div class="q-header">Your Cyber Security Maturity Results</div>
          <div class="overall-score" id="overall-score">0%</div>
          <div class="maturity-level" id="maturity-level">Calculating...</div>
        </div>
       
        <div class="auto-email-notice" id="autoEmailNotice">
          📧 A copy of your assessment results has been sent to our security consultants for review.
        </div>
       
        <h3 style="margin: 1.5rem 0 1rem; font-size: 1.2rem;">Security Pillar Results</h3>
        <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
          <table class="pillars-table" id="pillars-table">
            <thead>
              <tr>
                <th>Security Pillar</th>
                <th>Score</th>
                <th>Max</th>
                <th>Maturity %</th>
                <th>Progress</th>
              </tr>
            </thead>
            <tbody id="pillars-body">
              <!-- Will be populated by JavaScript -->
            </tbody>
          </table>
        </div>
       
        <div class="recommendations">
          <h2 style="text-align:center; margin-bottom:1.5rem; font-size:1.3rem;" id="recommendations-header">Personalized Recommendations</h2>
          <div id="no-recommendations" class="no-recommendations" style="display:none;">
            <h3>🎉 Excellent Security Posture!</h3>
            <p>Congratulations! Your organization has achieved exceptional maturity across all security pillars based on your specific selections.</p>
            <p>Continue with regular security assessments and stay updated with emerging threats.</p>
          </div>
          <div class="recommendations-grid" id="recommendations-grid">
            <!-- Will be populated by JavaScript based on actual answers -->
          </div>
        </div>
       
        <!-- Email Form -->
        <div class="email-form">
          <h3>📧 Get Your Personalized Report Emailed to You</h3>
          <p>Enter your email address to receive a copy of your security maturity report with tailored recommendations:</p>
          <input type="email" id="clientEmail" placeholder="your.email@company.com" required>
          <div class="email-success" id="emailSuccess">
            ✅ Your report has been sent to your email address!
          </div>
          <div class="email-error" id="emailError">
            ❌ There was an error sending your report. Please try again.
          </div>
        </div>
       
        <div class="download-section">
          <div class="btn-box-wrap email-buttons">
            <button class="button" onclick="retakeAssessment()">Retake Assessment</button>
            <button class="pdf-button" id="pdfBtn" onclick="generatePDF()">Download PDF Report</button>
            <button class="email-button" onclick="sendReportToClient()">Send Me The Report</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Hidden PDF Page 1 -->
  <div id="pdf-page-1" class="pdf-page">
    <div class="pdf-header">
      <img src="https://assessment.checkpoint.com/wp-content/uploads/2024/08/logo.svg" class="pdf-logo" alt="Check Point Logo">
      <h1>Cyber Security Maturity Assessment Report</h1>
    </div>
    <div class="pdf-date" id="pdf-date-1"></div>
    
    <div class="pdf-score-summary">
      <div class="pdf-overall-score" id="pdf-overall-score-1">0%</div>
      <div class="pdf-maturity-level" id="pdf-maturity-level-1">Limited Maturity</div>
    </div>
    
    <div class="pdf-section">
      <h2>Security Pillar Results</h2>
      <table class="pdf-table" id="pdf-pillars-table-1">
        <thead>
          <tr>
            <th>Security Pillar</th>
            <th>Score</th>
            <th>Max</th>
            <th>Maturity %</th>
            <th>Progress</th>
          </tr>
        </thead>
        <tbody id="pdf-pillars-body-1">
          <!-- Will be populated by JavaScript -->
        </tbody>
      </table>
    </div>
    
    <div class="pdf-footer">
      Page 1 of 3 | Generated by Check Point Security Assessment Tool | <span id="pdf-footer-date-1"></span>
    </div>
  </div>

  <!-- Hidden PDF Page 2 -->
  <div id="pdf-page-2" class="pdf-page">
    <div class="pdf-header">
      <img src="https://assessment.checkpoint.com/wp-content/uploads/2024/08/logo.svg" class="pdf-logo" alt="Check Point Logo">
      <h1>Cyber Security Maturity Assessment Report</h1>
    </div>
    <div class="pdf-date" id="pdf-date-2"></div>
    
    <div class="pdf-section">
      <h2>Personalized Recommendations (Page 2 of 3)</h2>
      <div id="pdf-recommendations-1">
        <!-- First half of recommendations -->
      </div>
    </div>
    
    <div class="pdf-footer">
      Page 2 of 3 | Generated by Check Point Security Assessment Tool | <span id="pdf-footer-date-2"></span>
    </div>
  </div>

  <!-- Hidden PDF Page 3 -->
  <div id="pdf-page-3" class="pdf-page">
    <div class="pdf-header">
      <img src="https://assessment.checkpoint.com/wp-content/uploads/2024/08/logo.svg" class="pdf-logo" alt="Check Point Logo">
      <h1>Cyber Security Maturity Assessment Report</h1>
    </div>
    <div class="pdf-date" id="pdf-date-3"></div>
    
    <div class="pdf-section">
      <h2>Personalized Recommendations (Page 3 of 3)</h2>
      <div id="pdf-recommendations-2">
        <!-- Second half of recommendations -->
      </div>
    </div>
    
    <div class="pdf-footer">
      Page 3 of 3 | Generated by Check Point Security Assessment Tool | <span id="pdf-footer-date-3"></span>
    </div>
  </div>

  <script>
    // =============================================
    // SUPABASE CONFIGURATION - YOUR KEYS ARE ALREADY INSERTED
    // =============================================
    
    // Your Supabase URL and key (already set up for you)
    const SUPABASE_URL = 'https://srqyuqhsjfedwulwlvhi.supabase.co';
    const SUPABASE_PUBLISHABLE_KEY = 'sb_publishable_uyz4arnlDxpd70tkHxuCLQ_ghq9Zua8';
    
    // Initialize Supabase
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_PUBLISHABLE_KEY);
    
    // Table names - using your actual table names
    const TABLES = {
      RESULTS: 'maturity_model_results',
      USERS: 'maturity_model_app_users'
    };
    
    // Current user session
    let currentUser = null;
    
    // Your existing variables
    let currentQuestion = 0;
    const totalQuestions = 32;
    let answers = {};
    let overallScore = 0;
    let pillarScores = {};
    
    // Question to Pillar Mapping (from your original code)
    const questionPillarMapping = {
      q1: 'Hybrid Mesh Network Security',
      q2: 'Hybrid Mesh Network Security',
      q3: 'Hybrid Mesh Network Security',
      q4: 'Hybrid Mesh Network Security',
      q5: 'Hybrid Mesh Network Security',
      q6: 'Hybrid Mesh Network Security',
      q7: 'Hybrid Mesh Network Security',
      q8: 'Hybrid Mesh Network Security',
      q9: 'Hybrid Mesh Network Security',
      q10: 'General',
      q11: 'Workspace Security',
      q12: 'Hybrid Mesh Network Security',
      q13: 'Workspace Security',
      q14: 'Workspace Security',
      q15: 'Workspace Security',
      q16: 'Workspace Security',
      q17: 'Workspace Security',
      q18: 'General',
      q19: 'Workspace Security',
      q20: 'Hybrid Mesh Network Security',
      q21: 'Hybrid Mesh Network Security',
      q22: 'Workspace Security',
      q23: 'General',
      q24: 'Exposure Management',
      q25: 'General',
      q26: 'General',
      q27: 'General',
      q28: 'General',
      q29: 'AI Security',
      q30: 'AI Security',
      q31: 'AI Security',
      q32: 'AI Security'
    };
    
    // Define the four main pillars plus General
    const mainPillars = [
      'Hybrid Mesh Network Security',
      'Workspace Security', 
      'Exposure Management',
      'AI Security',
      'General'
    ];
    
    // Scoring configuration (from your original code)
    const scoringConfig = {
      q1: { maxScore: 50, answers: {
        'Next-Generation Firewall (NGFW)': 5,
        'Intrusion Detection/Prevention Systems (IDS/IPS)': 5,
        'Network Segmentation and Microsegmentation': 5,
        'Network Access Control (NAC)': 5,
        'DNS and Content Filtering': 5,
        'User Entity Behavioural Analysis': 5,
        'Deception Technologies (e.g., honeypots)': 5,
        'SASE Secure Remote Access': 5,
        'VPN Secure Remote Access': 5,
        'Network Traffic Analysis (NTA)': 5
      }},
      q2: { maxScore: 10, answers: {
        'We use a fully scalable, elastic security solution that dynamically adds capacity (e.g., cloud-like auto-scaling firewalls or security fabric)': 10,
        'We use clustering or load balancing across multiple fixed security appliances from a single vendor': 6,
        'We manually purchase and deploy additional firewalls/appliances when capacity is reached': 3,
        'We do not have a scalable approach — capacity is fixed and often becomes a bottleneck': 0
      }},
      q3: { maxScore: 5, answers: {
        'Active-active firewalls are deployed from a single vendor': 5,
        'Active-passive firewalls are deployed in highly available clusters': 2,
        'Firewalls with load balancers from another vendor are deployed': 2,
        'Not sure': 0
      }},
      q4: { maxScore: 10, answers: {
        'We use a fully scalable, elastic security solution that dynamically adds capacity (e.g., cloud-like auto-scaling firewalls or security fabric)': 10,
        'We use clustering or load balancing across multiple fixed security appliances from a single vendor': 6,
        'We manually purchase and deploy additional firewalls/appliances when capacity is reached': 3,
        'We do not have a scalable approach — capacity is fixed and often becomes a bottleneck': 0
      }},
      q5: { maxScore: 5, answers: {
        'Active-active firewalls are deployed from a single vendor': 5,
        'Active-passive firewalls are deployed in highly available clusters': 2,
        'Firewalls with load balancers from another vendor are deployed': 2,
        'Not sure': 0
      }},
      q6: { maxScore: 25, answers: {
        'Software-defined Networking': 5,
        'Agile and automated policy': 5,
        'Business logic policy': 5,
        'Service chaining using NSX/Cisco/ACI/OpenStack': 5,
        'Dedicated policy layers': 5,
        'Not sure': 0
      }},
      q7: { maxScore: 40, answers: {
        'Sandboxing': 5,
        'Next Generation Web Application Firewall': 5,
        'Cloud-native vulnerability scanning': 5,
        'Real-time threat intelligence to prevent zero-day attacks': 5,
        'Kubernetes runtime security': 5,
        'Anti-malware': 5,
        'File sanitization (CDR)': 5,
        'Malware DNA': 5,
        'Not sure': 0
      }},
      q8: { maxScore: 20, answers: {
        'Posture management': 5,
        'Threat prevention': 5,
        'Vulnerability scanning': 5,
        'Least privileged access': 5,
        'Not using cloud for workloads': 0,
        'Not sure': 0
      }},
      q9: { maxScore: 15, answers: {
        'Fully unified': 15,
        'Managed through separate tools': 5,
        'Not sure': 0
      }},
      q10: { maxScore: 12, answers: {
        'Up to 10%': 12,
        '11%–50%': 8,
        '51%–80%': 4,
        'Over 80%': 1
      }},
      q11: { maxScore: 15, answers: {
        'We do not allow any remote access': 15,
        'Employees with company managed laptops and/or mobile devices only': 10,
        'From personal mobile devices': 4,
        'From personal laptops': 4,
        'By third parties (contractors, consultants or partners)': 3
      }},
      q12: { maxScore: 20, answers: {
        'SASE connection (cloud-based service)': 5,
        'Device risk posture check': 5,
        'Multi-factor authentication': 5,
        'VPN connection': 5
      }},
      q13: { maxScore: 30, answers: {
        'Sanitize potentially malicious downloads': 5,
        'Real-time scanning of online forms for phishing prevention': 5,
        'Stop entering corporate credentials to non-business websites': 5,
        'Restrict access to certain websites (e.g. block access to adult and gambling sites)': 5,
        'Scan for data leakage': 5,
        'Prevent access to URLs known as malicious': 5
      }},
      q14: { maxScore: 25, answers: {
        'Disk encryption on endpoint devices': 5,
        'Scan files for sensitive content before uploaded to external websites/messaging apps': 5,
        'Scan content that\'s uploaded in the browser': 5,
        'Scan email and office applications for sensitive content before it is shared externally': 5,
        'Permit safe use of Generative AI tools': 5,
        'I don\'t know': 0
      }},
      q15: { maxScore: 12, answers: {
        'Office 365 + Google apps + Teams/SharePoint/OneDrive': 12,
        'Gmail + Google Workspace': 10,
        'Mixed modern SaaS (Office 365/Google + Zoom/Slack/Dropbox)': 8,
        'On-premises email (Microsoft Exchange) only': 5,
        'Other apps only (Zoom/Slack/Dropbox etc.)': 6
      }},
      q16: { maxScore: 24, answers: {
        'Recover ransomware-encrypted files': 10,
        'Automatically detect and stop the attack': 7,
        'Quarantine the infected endpoint': 7,
        'None of the above': 0
      }},
      q17: { maxScore: 45, answers: {
        'Endpoint Detection and Response / Extended Detection and Response / Managed Detection and Response (EDR/XDR/MDR)': 6,
        'Next-Generation Antivirus / Endpoint Protection Platform (NGAV/EPP)': 5,
        'Cloud-based security services (SASE)': 6,
        'Email security': 5,
        'Secure web gateway': 5,
        'Mobile threat defence': 5,
        'Endpoint and mobile vulnerability management': 5,
        'Cloud-based application posture check': 4,
        'Collaboration apps security': 4
      }},
      q18: { maxScore: 20, answers: {
        '1–3 vendors': 20,
        '4–6 vendors': 12,
        '7–9 vendors': 6,
        '10+ vendors': 2
      }},
      q19: { maxScore: 50, answers: {
        'Endpoint Detection and Response (EDR)': 5,
        'Antivirus / Anti-malware': 5,
        'Full Disk Encryption + Removable Device Encryption': 5,
        'Application Control': 5,
        'Posture Management (vulnerability) with Patch Management': 5,
        'USB / Peripheral Control': 5,
        'Browser Security with Content Filtering and Data Loss Prevention': 5,
        'Mobile Device Management (MDM) + Mobile Device Security': 5,
        'Local Firewall and Host-based Intrusion Detection System': 5,
        'Device Policy Configuration and Control': 5
      }},
      q20: { maxScore: 50, answers: {
        'Cloud Security Posture Management (CSPM)': 5,
        'Cloud Workload Protection Platform (CWPP)': 5,
        'Cloud Infrastructure Entitlement Management (CIEM)': 5,
        'Encryption of Data at Rest and in Transit': 5,
        'Network Segmentation': 5,
        'Cloud Firewall': 5,
        'Cloud Web Application Firewall': 5,
        'Container Security + Serverless (e.g., image scanning, runtime protection)': 5,
        'Cloud-Native Application Protection Platform (CNAPP)': 5,
        'Cloud Access Security Broker (CASB)': 5
      }},
      q21: { maxScore: 50, answers: {
        'Web Application Firewall (WAF)': 5,
        'Static and Dynamic Application Security Testing (SAST/DAST)': 5,
        'Software Composition Analysis (SCA)': 5,
        'Secure Software Development Life Cycle Practices': 5,
        'API Security': 5,
        'Large Language Model Security': 5,
        'Code Signing and Integrity Checks': 5,
        'DevSecOps Integration': 5,
        'Penetration Testing': 5,
        'OWASP Top 10 Mitigation': 5
      }},
      q22: { maxScore: 50, answers: {
        'Email Security in place': 5,
        'Phishing Protection and Simulation': 5,
        'Attachment Sandboxing + Encrypted Attachments': 5,
        'URL Rewriting and Click Protection': 5,
        'DMARC, DKIM, SPF Enforcement': 5,
        'Data Leakage Prevention (DLP) for Email and Collaboration': 5,
        'Email Encryption': 5,
        'Collaboration Tool Monitoring (e.g., Teams, Slack)': 5,
        'Impersonation and Spoofing Detection': 5,
        'User Awareness Training': 5
      }},
      q23: { maxScore: 46, answers: {
        'Data Classification and Labeling': 5,
        'Data Loss Prevention (DLP)': 5,
        'Encryption (at rest, in transit, and in use)': 5,
        'Tokenization and Masking': 5,
        'Data Access Governance': 1,
        'Data Discovery and Mapping': 5,
        'Data Residency and Sovereignty Controls': 5,
        'Secure Data Disposal': 5,
        'Privacy Impact Assessments (PIAs)': 5,
        'User Activity Monitoring on Sensitive Data': 5
      }},
      q24: { maxScore: 50, answers: {
        'Vendor Risk Assessments': 5,
        'Continuous Attack Surface Monitoring': 5,
        'Vulnerability Management + Exposure Validation': 5,
        'Risk Management': 5,
        'Dark Web Scanning for Sensitive Information': 5,
        'Threat Intelligence': 5,
        'Digital Brand and Risk Protection + Phishing / Social Media': 5,
        'Third-Party Access Controls': 5,
        'Continuous Monitoring of Vendors': 5,
        'Onboarding/Offboarding Procedures': 5
      }},
      q25: { maxScore: 50, answers: {
        'Multi-Factor Authentication (MFA)': 5,
        'Single Sign-On (SSO)': 5,
        'Privileged Access Management (PAM)': 5,
        'Role-Based Access Control (RBAC)': 5,
        'Just-In-Time (JIT) Access': 5,
        'Identity Federation and Federation Protocols (SAML, OIDC)': 5,
        'User Lifecycle Management': 5,
        'Access Reviews and Recertification': 5,
        'Password Policy Enforcement': 5,
        'Behavioral Biometrics / Risk-Based Authentication': 5
      }},
      q26: { maxScore: 50, answers: {
        'Security Information and Event Management (SIEM)': 5,
        'Security Orchestration, Automation and Response (SOAR)': 5,
        'Threat Intelligence Integration': 5,
        'User and Entity Behavior Analytics (UEBA)': 5,
        'Log Aggregation and Retention': 5,
        'Anomaly Detection': 5,
        'Deception Technologies': 5,
        'Threat Hunting Capabilities': 5,
        'Real-time Alerting and Correlation': 5,
        'MITRE ATT&CK Mapping': 5
      }},
      q27: { maxScore: 50, answers: {
        'Incident Response Plan (IRP)': 5,
        'Tabletop Exercises and Simulations': 5,
        'Forensics and Evidence Collection Tools': 5,
        'Crisis Communication Plan': 5,
        'Automated Virtual Patching': 5,
        'Business Continuity Plan (BCP)': 5,
        'Disaster Recovery Plan (DRP)': 5,
        'Playbooks for Common Scenarios': 5,
        'Post-Incident Review Process': 5,
        'Ransomware Response Protocols': 5
      }},
      q28: { maxScore: 50, answers: {
        'Business Impact Analyses': 5,
        'Risk Assessments': 5,
        'Vulnerability Assessments': 5,
        'Penetration Testing': 5,
        'Continuous Threat and Exposure Management': 5,
        'Unified Management': 5,
        'AI Assisted Security Tools + Management + Detect + Respond': 5,
        'Open Garden Platform': 5,
        'Security Operations Center (SOC)': 5,
        'Shared Indicators of Compromise': 5
      }},
      q29: { maxScore: 5, answers: {
        'No AI models to protect': 0,
        'No runtime protections; reliant on basic firewalls or none at all.': 1,
        'Basic monitoring tools in use, but reactive and manual.': 2,
        'Standardized tools for anomaly detection deployed across key AI workloads.': 3,
        'Automated threat response with metrics tracking effectiveness.': 4,
        'AI-specific runtime defenses integrated with predictive analytics and zero-trust architecture.': 5
      }},
      q30: { maxScore: 5, answers: {
        'No formal governance; ad-hoc development and deployment.': 1,
        'Basic policies exist but are not consistently applied.': 2,
        'Defined governance standards with regular reviews for all GenAI apps.': 3,
        'Governance integrated with risk assessments and compliance reporting.': 4,
        'Advanced governance with AI ethics boards, automated audits, and continuous policy evolution.': 5
      }},
      q31: { maxScore: 5, answers: {
        'Minimal DLP; data handled without specific AI considerations.': 1,
        'Basic access controls and encryption for sensitive data.': 2,
        'AI-specific DLP policies with tools for data tagging and leakage detection.': 3,
        'Real-time monitoring and automated blocking of DLP violations.': 4,
        'Integrated DLP with AI-driven threat intelligence and zero-data-exposure architectures.': 5
      }},
      q32: { maxScore: 5, answers: {
        'Basic physical security; no AI-specific data center protections.': 1,
        'Standard network segmentation and patching routines.': 2,
        'Dedicated AI zones with multi-factor authentication and regular audits.': 3,
        'Advanced monitoring with AI-assisted vulnerability scanning and incident response.': 4,
        'Fully resilient setup with supply chain verification, quantum-resistant encryption, and automated failover.': 5
      }}
    };
    
    // Pillar recommendations (simplified version)
    const pillarRecommendations = {
      'Hybrid Mesh Network Security': [
        { text: 'Deploy Next-Generation Firewalls (NGFW) with advanced threat prevention capabilities', priority: 'critical', threshold: 20 },
        { text: 'Implement network segmentation and microsegmentation to limit lateral movement', priority: 'critical', threshold: 30 },
        { text: 'Deploy Intrusion Detection/Prevention Systems (IDS/IPS) across all network segments', priority: 'high', threshold: 40 }
      ],
      'Workspace Security': [
        { text: 'Deploy Endpoint Detection and Response (EDR) on all endpoints', priority: 'critical', threshold: 25 },
        { text: 'Implement Next-Generation Antivirus (NGAV) across all devices', priority: 'critical', threshold: 30 },
        { text: 'Enable full disk encryption on all company devices', priority: 'high', threshold: 40 }
      ],
      'Exposure Management': [
        { text: 'Implement continuous attack surface monitoring', priority: 'critical', threshold: 20 },
        { text: 'Deploy vulnerability management with exposure validation', priority: 'critical', threshold: 30 },
        { text: 'Implement vendor risk assessment program', priority: 'high', threshold: 40 }
      ],
      'AI Security': [
        { text: 'Implement runtime monitoring for AI systems with anomaly detection and input validation', priority: 'critical', threshold: 20 },
        { text: 'Establish governance frameworks for GenAI applications with model approval processes', priority: 'critical', threshold: 25 },
        { text: 'Deploy DLP controls for AI-related data including classification and encryption', priority: 'high', threshold: 35 }
      ],
      'General': [
        { text: 'Consolidate security vendors for better visibility and management', priority: 'medium', threshold: 30 },
        { text: 'Implement unified security management platform', priority: 'medium', threshold: 40 },
        { text: 'Conduct regular security awareness training for all employees', priority: 'high', threshold: 50 }
      ]
    };
    
    // =============================================
    // AUTHENTICATION FUNCTIONS
    // =============================================
    
    async function login() {
      const email = document.getElementById('login-email').value;
      const password = document.getElementById('login-password').value;
      const errorDiv = document.getElementById('login-error');
      
      if (!email || !password) {
        errorDiv.textContent = 'Please enter email and password';
        errorDiv.style.display = 'block';
        return;
      }
      
      try {
        const { data, error } = await supabase
          .from(TABLES.USERS)
          .select('*')
          .eq('email', email)
          .eq('password', password);
        
        if (error) throw error;
        
        if (data && data.length > 0) {
          currentUser = data[0];
          errorDiv.style.display = 'none';
          
          // IMPORTANT: Change this to YOUR email address
          if (email === 'nadine@cyberly.com') {
            showAdminDashboard();
          } else {
            showHomePage();
          }
        } else {
          errorDiv.textContent = 'Invalid email or password';
          errorDiv.style.display = 'block';
        }
      } catch (error) {
        console.error('Login error:', error);
        errorDiv.textContent = 'Error logging in. Please try again.';
        errorDiv.style.display = 'block';
      }
    }
    
    async function signup() {
      const email = document.getElementById('signup-email').value;
      const password = document.getElementById('signup-password').value;
      const confirm = document.getElementById('signup-confirm').value;
      const errorDiv = document.getElementById('signup-error');
      const successDiv = document.getElementById('signup-success');
      
      if (!email || !password || !confirm) {
        errorDiv.textContent = 'Please fill in all fields';
        errorDiv.style.display = 'block';
        successDiv.style.display = 'none';
        return;
      }
      
      if (password !== confirm) {
        errorDiv.textContent = 'Passwords do not match';
        errorDiv.style.display = 'block';
        successDiv.style.display = 'none';
        return;
      }
      
      if (password.length < 6) {
        errorDiv.textContent = 'Password must be at least 6 characters';
        errorDiv.style.display = 'block';
        successDiv.style.display = 'none';
        return;
      }
      
      try {
        const { data: existingUser, error: checkError } = await supabase
          .from(TABLES.USERS)
          .select('email')
          .eq('email', email);
        
        if (checkError) throw checkError;
        
        if (existingUser && existingUser.length > 0) {
          errorDiv.textContent = 'Email already registered';
          errorDiv.style.display = 'block';
          successDiv.style.display = 'none';
          return;
        }
        
        const { data, error } = await supabase
          .from(TABLES.USERS)
          .insert([{ email: email, password: password }])
          .select();
        
        if (error) throw error;
        
        errorDiv.style.display = 'none';
        successDiv.textContent = 'Account created successfully! Please login.';
        successDiv.style.display = 'block';
        
        document.getElementById('signup-email').value = '';
        document.getElementById('signup-password').value = '';
        document.getElementById('signup-confirm').value = '';
        
        setTimeout(() => {
          showLogin();
        }, 2000);
        
      } catch (error) {
        console.error('Signup error:', error);
        errorDiv.textContent = 'Error creating account. Please try again.';
        errorDiv.style.display = 'block';
        successDiv.style.display = 'none';
      }
    }
    
    function logout() {
      currentUser = null;
      document.getElementById('admin-dashboard').style.display = 'none';
      document.getElementById('home').style.display = 'none';
      document.getElementById('assessment').style.display = 'none';
      document.getElementById('auth').style.display = 'flex';
      document.getElementById('login-section').style.display = 'block';
      document.getElementById('signup-section').style.display = 'none';
    }
    
    function showLogin() {
      document.getElementById('login-section').style.display = 'block';
      document.getElementById('signup-section').style.display = 'none';
      document.getElementById('login-error').style.display = 'none';
      document.getElementById('signup-error').style.display = 'none';
      document.getElementById('signup-success').style.display = 'none';
    }
    
    function showSignup() {
      document.getElementById('login-section').style.display = 'none';
      document.getElementById('signup-section').style.display = 'block';
      document.getElementById('login-error').style.display = 'none';
      document.getElementById('signup-error').style.display = 'none';
      document.getElementById('signup-success').style.display = 'none';
    }
    
    function showHomePage() {
      document.getElementById('auth').style.display = 'none';
      document.getElementById('admin-dashboard').style.display = 'none';
      document.getElementById('assessment').style.display = 'none';
      document.getElementById('home').style.display = 'flex';
      document.getElementById('welcome-message').textContent = `Welcome, ${currentUser.email}`;
      
      // IMPORTANT: Change this to YOUR email address
      if (currentUser.email === 'your-email@example.com') {
        document.getElementById('admin-btn').style.display = 'inline-block';
      } else {
        document.getElementById('admin-btn').style.display = 'none';
      }
    }
    
    async function showAdminDashboard() {
      document.getElementById('auth').style.display = 'none';
      document.getElementById('home').style.display = 'none';
      document.getElementById('assessment').style.display = 'none';
      document.getElementById('admin-dashboard').style.display = 'block';
      await loadAdminData();
    }
    
    // =============================================
    // ADMIN DASHBOARD FUNCTIONS
    // =============================================
    
    async function loadAdminData() {
      try {
        const { data: results, error } = await supabase
          .from(TABLES.RESULTS)
          .select('*')
          .order('created_at', { ascending: false });
        
        if (error) throw error;
        
        window.allResults = results || [];
        updateAdminStats(results);
        displayResultsTable(results);
        
      } catch (error) {
        console.error('Error loading admin data:', error);
        alert('Error loading data from database');
      }
    }
    
    function updateAdminStats(results) {
      if (!results || results.length === 0) {
        document.getElementById('admin-stats').innerHTML = `
          <div class="stat-card">
            <h3>Total Assessments</h3>
            <div class="number">0</div>
          </div>
        `;
        return;
      }
      
      const totalAssessments = results.length;
      const uniqueUsers = new Set(results.map(r => r.user_email)).size;
      const avgScore = Math.round(results.reduce((sum, r) => sum + r.overall_score, 0) / totalAssessments);
      
      document.getElementById('admin-stats').innerHTML = `
        <div class="stat-card">
          <h3>Total Assessments</h3>
          <div class="number">${totalAssessments}</div>
        </div>
        <div class="stat-card">
          <h3>Unique Users</h3>
          <div class="number">${uniqueUsers}</div>
        </div>
        <div class="stat-card">
          <h3>Average Score</h3>
          <div class="number">${avgScore}%</div>
        </div>
      `;
    }
    
    function displayResultsTable(results) {
      const tbody = document.getElementById('results-body');
      
      if (!results || results.length === 0) {
        tbody.innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 2rem;">No results found</td></tr>';
        return;
      }
      
      tbody.innerHTML = results.map(result => `
        <tr>
          <td>${new Date(result.created_at).toLocaleDateString()}</td>
          <td>${result.user_email}</td>
          <td><strong>${result.overall_score}%</strong></td>
          <td>${result.maturity_level}</td>
          <td>
            <button class="view-details" onclick="viewResultDetails('${result.id}')">View Details</button>
          </td>
        </tr>
      `).join('');
    }
    
    function filterResults() {
      const searchTerm = document.getElementById('search-filter').value.toLowerCase();
      const dateFilter = document.getElementById('date-filter').value;
      
      let filtered = window.allResults || [];
      
      if (searchTerm) {
        filtered = filtered.filter(r => r.user_email.toLowerCase().includes(searchTerm));
      }
      
      if (dateFilter) {
        filtered = filtered.filter(r => {
          const resultDate = new Date(r.created_at).toISOString().split('T')[0];
          return resultDate === dateFilter;
        });
      }
      
      displayResultsTable(filtered);
      updateAdminStats(filtered);
    }
    
    async function viewResultDetails(resultId) {
      try {
        const { data, error } = await supabase
          .from(TABLES.RESULTS)
          .select('*')
          .eq('id', resultId)
          .single();
        
        if (error) throw error;
        
        const modal = document.createElement('div');
        modal.className = 'modal';
        modal.style.display = 'flex';
        
        let pillarDetails = '';
        if (data.pillar_scores) {
          pillarDetails = Object.entries(data.pillar_scores)
            .map(([pillar, scores]) => `
              <div class="modal-detail">
                <strong>${pillar}:</strong> ${scores.percentage}% (${scores.score}/${scores.maxScore})
              </div>
            `).join('');
        }
        
        modal.innerHTML = `
          <div class="modal-content">
            <span class="modal-close" onclick="this.closest('.modal').remove()">&times;</span>
            <h2>Assessment Details</h2>
            <div class="modal-detail"><strong>Date:</strong> ${new Date(data.created_at).toLocaleString()}</div>
            <div class="modal-detail"><strong>Email:</strong> ${data.user_email}</div>
            <div class="modal-detail"><strong>Overall Score:</strong> ${data.overall_score}%</div>
            <div class="modal-detail"><strong>Maturity Level:</strong> ${data.maturity_level}</div>
            <h3 style="margin: 1rem 0 0.5rem;">Pillar Scores</h3>
            ${pillarDetails}
            <div style="text-align: right; margin-top: 1rem;">
              <button class="view-details" onclick="this.closest('.modal').remove()">Close</button>
            </div>
          </div>
        `;
        
        document.body.appendChild(modal);
        
      } catch (error) {
        console.error('Error fetching result details:', error);
        alert('Error loading result details');
      }
    }
    
    function exportToCSV() {
      const results = window.allResults || [];
      
      if (results.length === 0) {
        alert('No data to export');
        return;
      }
      
      const headers = ['Date', 'Email', 'Overall Score', 'Maturity Level'];
      const rows = results.map(r => [
        new Date(r.created_at).toLocaleDateString(),
        r.user_email,
        r.overall_score,
        r.maturity_level
      ]);
      
      const csvContent = [
        headers.join(','),
        ...rows.map(row => row.join(','))
      ].join('\n');
      
      const blob = new Blob([csvContent], { type: 'text/csv' });
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `assessment_results_${new Date().toISOString().split('T')[0]}.csv`;
      a.click();
      window.URL.revokeObjectURL(url);
    }
    
    // =============================================
    // ASSESSMENT FUNCTIONS (from your original code)
    // =============================================
    
    function startAssessment() {
      answers = {};
      document.querySelectorAll('input[type="checkbox"], input[type="radio"]').forEach(input => {
        input.checked = false;
        input.closest('.answer')?.classList.remove('selected');
      });
      
      document.getElementById('home').style.display = 'none';
      document.getElementById('assessment').style.display = 'flex';
      
      currentQuestion = 1;
      document.querySelectorAll('.q-box').forEach(box => {
        box.classList.remove('active');
      });
      document.getElementById('q1').classList.add('active');
      
      updateUI();
    }
    
    function retakeAssessment() {
      answers = {};
      document.querySelectorAll('input[type="checkbox"], input[type="radio"]').forEach(input => {
        input.checked = false;
        input.closest('.answer')?.classList.remove('selected');
      });
      document.getElementById('results').style.display = 'none';
      document.getElementById('q1').classList.add('active');
      currentQuestion = 1;
      document.querySelectorAll('.q-box').forEach(box => {
        if (box.id !== 'q1') box.classList.remove('active');
      });
      updateUI();
    }
    
    function updateUI() {
      const isQuestion = currentQuestion >= 1 && currentQuestion <= totalQuestions;
      document.getElementById('question-bg').classList.toggle('active', isQuestion);
      document.getElementById('white-bg').classList.toggle('active', !isQuestion);
      const progress = isQuestion ? (currentQuestion / totalQuestions) * 100 : 0;
      document.getElementById('question-progress-bar').style.width = progress + '%';
    }
    
    function nextQuestion(q) {
      const box = document.getElementById(`q${q}`);
      const checked = box.querySelectorAll('input:checked');
      if (checked.length === 0) {
        alert("Please select at least one answer before continuing.");
        return;
      }
      let selected = [];
      checked.forEach(ch => selected.push(ch.closest('.answer').querySelector('.text').textContent.trim()));
      answers[`q${q}`] = selected;
      box.classList.remove('active');
      currentQuestion = q + 1;
      if (currentQuestion <= totalQuestions) {
        document.getElementById(`q${currentQuestion}`).classList.add('active');
      } else {
        document.getElementById('final').style.display = 'block';
        setTimeout(() => document.getElementById('progress-bar').style.width = '100%', 100);
        setTimeout(showResultsPage, 3000);
      }
      updateUI();
    }
    
    function prevQuestion(q) {
      if (q <= 1) return;
      document.getElementById(`q${q}`).classList.remove('active');
      currentQuestion = q - 1;
      document.getElementById(`q${currentQuestion}`).classList.add('active');
      updateUI();
    }
    
    async function showResultsPage() {
      document.getElementById('final').style.display = 'none';
      document.getElementById('results').style.display = 'block';
      updateUI();
      
      pillarScores = calculatePillarScores();
      overallScore = calculateOverallScore(pillarScores);
      overallScore = Math.min(overallScore, 100);
      
      document.getElementById('overall-score').textContent = `${overallScore}%`;
      const maturityLevel = getMaturityLevel(overallScore);
      document.getElementById('maturity-level').textContent = maturityLevel;
      displayPillarScores(pillarScores);
      generateRecommendations(pillarScores, overallScore);
      
      // Save to Supabase if user is logged in
      if (currentUser) {
        await saveResultsToSupabase(overallScore, maturityLevel);
      }
    }
    
    async function saveResultsToSupabase(overallScore, maturityLevel) {
      try {
        const resultData = {
          user_email: currentUser.email,
          overall_score: overallScore,
          maturity_level: maturityLevel,
          pillar_scores: pillarScores,
          answers: answers
        };
        
        const { data, error } = await supabase
          .from(TABLES.RESULTS)
          .insert([resultData]);
        
        if (error) throw error;
        
        const autoEmailNotice = document.getElementById('autoEmailNotice');
        autoEmailNotice.textContent = '✅ Your assessment results have been saved to your profile';
        autoEmailNotice.style.display = 'block';
        autoEmailNotice.style.background = '#d4edda';
        autoEmailNotice.style.color = '#155724';
        
      } catch (error) {
        console.error('Error saving results to Supabase:', error);
      }
    }
    
    function calculatePillarScores() {
      const pillarScores = {};
      mainPillars.forEach(pillar => {
        pillarScores[pillar] = { score: 0, maxScore: 0, percentage: 0 };
      });
      
      for (let i = 1; i <= totalQuestions; i++) {
        const questionKey = `q${i}`;
        const selectedAnswers = answers[questionKey] || [];
        const config = scoringConfig[questionKey];
        if (!config) continue;
        
        const pillar = questionPillarMapping[questionKey] || 'General';
        let questionScore = 0;
        
        const isRadio = document.querySelector(`input[name="${questionKey}"][type="radio"]`) !== null;
        
        if (isRadio && selectedAnswers.length > 0) {
          const answerText = selectedAnswers[0];
          if (config.answers[answerText] !== undefined) {
            questionScore = config.answers[answerText];
          }
        } else {
          selectedAnswers.forEach(answerText => {
            if (config.answers[answerText] !== undefined) {
              questionScore += config.answers[answerText];
            }
          });
        }
        
        questionScore = Math.min(questionScore, config.maxScore);
        
        if (pillarScores[pillar]) {
          pillarScores[pillar].score += questionScore;
          pillarScores[pillar].maxScore += config.maxScore;
        }
      }
      
      Object.keys(pillarScores).forEach(pillar => {
        const data = pillarScores[pillar];
        if (data.maxScore > 0) {
          data.score = Math.min(data.score, data.maxScore);
          data.percentage = Math.min(Math.round((data.score / data.maxScore) * 100), 100);
        }
      });
      
      return pillarScores;
    }
    
    function calculateOverallScore(pillarScores) {
      let totalScore = 0, totalMaxScore = 0;
      Object.keys(pillarScores).forEach(pillar => {
        totalScore += pillarScores[pillar].score;
        totalMaxScore += pillarScores[pillar].maxScore;
      });
      return totalMaxScore > 0 ? Math.min(Math.round((totalScore / totalMaxScore) * 100), 100) : 0;
    }
    
    function getMaturityLevel(percentage) {
      if (percentage >= 90) return 'Advanced Maturity';
      if (percentage >= 75) return 'Established Maturity';
      if (percentage >= 60) return 'Developing Maturity';
      if (percentage >= 40) return 'Initial Maturity';
      return 'Limited Maturity';
    }
    
    function displayPillarScores(pillarScores) {
      const tableBody = document.getElementById('pillars-body');
      tableBody.innerHTML = '';
      
      const pillarsToShow = mainPillars.filter(pillar => 
        pillarScores[pillar] && pillarScores[pillar].maxScore > 0
      );
      
      pillarsToShow.forEach(pillar => {
        const data = pillarScores[pillar];
        const displayScore = Math.min(data.score, data.maxScore);
        const row = document.createElement('tr');
        row.innerHTML = `
          <td class="pillar-name">${pillar}</td>
          <td class="score-cell">${displayScore}</td>
          <td class="score-cell">${data.maxScore}</td>
          <td class="score-cell"><strong>${data.percentage}%</strong></td>
          <td>
            <div class="score-bar-container">
              <div class="score-bar" style="width: ${data.percentage}%; background: ${getScoreColor(data.percentage)};"></div>
            </div>
          </td>
        `;
        tableBody.appendChild(row);
      });
    }
    
    function getScoreColor(percentage) {
      if (percentage >= 80) return '#2E7D32';
      if (percentage >= 60) return '#FF9800';
      return '#D32F2F';
    }
    
    function generateRecommendations(pillarScores, overallScore) {
      const recommendationsGrid = document.getElementById('recommendations-grid');
      const noRecommendationsDiv = document.getElementById('no-recommendations');
      const recommendationsHeader = document.getElementById('recommendations-header');
      recommendationsGrid.innerHTML = '';
      
      if (overallScore === 100) {
        recommendationsHeader.style.display = 'none';
        recommendationsGrid.style.display = 'none';
        noRecommendationsDiv.style.display = 'block';
        return;
      }
      
      recommendationsHeader.style.display = 'block';
      recommendationsGrid.style.display = 'grid';
      noRecommendationsDiv.style.display = 'none';
      
      const pillarsWithData = mainPillars
        .filter(pillar => pillarScores[pillar] && pillarScores[pillar].maxScore > 0)
        .map(pillar => ({ name: pillar, percentage: pillarScores[pillar].percentage }))
        .sort((a, b) => a.percentage - b.percentage);
      
      const pillarsNeedingImprovement = pillarsWithData.filter(pillar => pillar.percentage < 80);
      
      pillarsNeedingImprovement.forEach(pillar => {
        const percentage = pillar.percentage;
        const pillarRecs = pillarRecommendations[pillar.name];
        
        if (pillarRecs) {
          const applicableRecs = pillarRecs.filter(rec => percentage < rec.threshold).slice(0, 3);
          
          if (applicableRecs.length > 0) {
            const card = document.createElement('div');
            card.className = 'recommendation-card';
            let recommendationsHTML = `<h4>${pillar.name} <span class="priority-badge priority-${applicableRecs[0].priority}">Priority: ${applicableRecs[0].priority.toUpperCase()}</span></h4>`;
            recommendationsHTML += `<p><strong>Current Maturity: ${percentage}%</strong></p>`;
            recommendationsHTML += '<div class="recommendation-list">';
            applicableRecs.forEach(rec => {
              recommendationsHTML += `<div class="recommendation-item recommendation-${rec.priority}">${rec.text}</div>`;
            });
            recommendationsHTML += '</div>';
            card.innerHTML = recommendationsHTML;
            recommendationsGrid.appendChild(card);
          }
        }
      });
    }
    
    async function generatePDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF('p', 'mm', 'a4');
      const today = new Date().toLocaleDateString();
      
      const originalText = document.getElementById('pdfBtn').textContent;
      document.getElementById('pdfBtn').textContent = 'Generating PDF...';
      document.getElementById('pdfBtn').disabled = true;
      
      try {
        await preparePDFPages(today);
        
        const page1Element = document.getElementById('pdf-page-1');
        const canvas1 = await html2canvas(page1Element, {
          scale: 2,
          useCORS: true,
          allowTaint: true,
          backgroundColor: '#ffffff'
        });
        const imgData1 = canvas1.toDataURL('image/jpeg', 1.0);
        const imgWidth = 190;
        const imgHeight1 = (canvas1.height * imgWidth) / canvas1.width;
        doc.addImage(imgData1, 'JPEG', 10, 10, imgWidth, imgHeight1);
        
        doc.addPage();
        const page2Element = document.getElementById('pdf-page-2');
        const canvas2 = await html2canvas(page2Element, {
          scale: 2,
          useCORS: true,
          allowTaint: true,
          backgroundColor: '#ffffff'
        });
        const imgData2 = canvas2.toDataURL('image/jpeg', 1.0);
        const imgHeight2 = (canvas2.height * imgWidth) / canvas2.width;
        doc.addImage(imgData2, 'JPEG', 10, 10, imgWidth, imgHeight2);
        
        doc.addPage();
        const page3Element = document.getElementById('pdf-page-3');
        const canvas3 = await html2canvas(page3Element, {
          scale: 2,
          useCORS: true,
          allowTaint: true,
          backgroundColor: '#ffffff'
        });
        const imgData3 = canvas3.toDataURL('image/jpeg', 1.0);
        const imgHeight3 = (canvas3.height * imgWidth) / canvas3.width;
        doc.addImage(imgData3, 'JPEG', 10, 10, imgWidth, imgHeight3);
        
        doc.save(`CyberSecurity_Maturity_Report_${new Date().toISOString().slice(0, 10)}.pdf`);
        
        document.getElementById('pdfBtn').textContent = originalText;
        document.getElementById('pdfBtn').disabled = false;
        
      } catch (error) {
        console.error('Error generating PDF:', error);
        alert('Error generating PDF. Please try again.');
        document.getElementById('pdfBtn').textContent = originalText;
        document.getElementById('pdfBtn').disabled = false;
      }
    }
    
    async function preparePDFPages(today) {
      for (let i = 1; i <= 3; i++) {
        document.getElementById(`pdf-date-${i}`).textContent = today;
        document.getElementById(`pdf-footer-date-${i}`).textContent = today;
      }
      
      document.getElementById('pdf-overall-score-1').textContent = overallScore + '%';
      document.getElementById('pdf-maturity-level-1').textContent = getMaturityLevel(overallScore);
      
      const pdfPillarsBody = document.getElementById('pdf-pillars-body-1');
      pdfPillarsBody.innerHTML = '';
      const pillarsToShow = mainPillars.filter(pillar => 
        pillarScores[pillar] && pillarScores[pillar].maxScore > 0
      );
      
      pillarsToShow.forEach(pillar => {
        const data = pillarScores[pillar];
        const displayScore = Math.min(data.score, data.maxScore);
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${pillar}</td>
          <td>${displayScore}</td>
          <td>${data.maxScore}</td>
          <td><strong>${data.percentage}%</strong></td>
          <td>
            <div class="pdf-progress-bar">
              <div class="pdf-progress-fill" style="width: ${data.percentage}%; background: ${getScoreColor(data.percentage)};"></div>
            </div>
          </td>
        `;
        pdfPillarsBody.appendChild(row);
      });
    }
    
    function sendReportToClient() {
      const clientEmail = document.getElementById('clientEmail').value;
      const emailSuccess = document.getElementById('emailSuccess');
      const emailError = document.getElementById('emailError');
     
      if (!clientEmail || !isValidEmail(clientEmail)) {
        emailError.textContent = 'Please enter a valid email address.';
        emailError.style.display = 'block';
        emailSuccess.style.display = 'none';
        return;
      }
     
      emailSuccess.textContent = 'Sending personalized report...';
      emailSuccess.style.display = 'block';
      emailError.style.display = 'none';
     
      setTimeout(() => {
        emailSuccess.textContent = '✅ Your personalized report has been sent to ' + clientEmail;
        emailSuccess.style.display = 'block';
      }, 2000);
    }
    
    function isValidEmail(email) {
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return emailRegex.test(email);
    }
    
    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('.answer input').forEach(inp => {
        inp.addEventListener('change', function() {
          const answer = this.closest('.answer');
          answer.classList.toggle('selected', this.checked);
          
          if (this.classList.contains('exclusive')) {
            if (this.checked) {
              const questionName = this.name;
              document.querySelectorAll(`input[name="${questionName}"]:not(.exclusive)`).forEach(otherInp => {
                otherInp.checked = false;
                otherInp.closest('.answer').classList.remove('selected');
              });
            }
          } else {
            const questionName = this.name;
            document.querySelectorAll(`input[name="${questionName}"].exclusive`).forEach(exclusiveInp => {
              exclusiveInp.checked = false;
              exclusiveInp.closest('.answer').classList.remove('selected');
            });
          }
          
          if (this.type === 'radio') {
            document.querySelectorAll(`input[name="${this.name}"]`).forEach(r => {
              if (r !== this) r.closest('.answer').classList.remove('selected');
            });
          }
        });
      });
      
      updateUI();
    });
  </script>
</body>
</html>
